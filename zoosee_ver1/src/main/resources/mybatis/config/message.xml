<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="message">
	
	
	<select id="countMessage" resultType="int">
		select count(*) as count from message where checked=0 and id=#{value} 
	</select>
	
	<select id="getMessageList" resultType="messageVO" parameterType="hashmap">
		select message_no, id, title, content, time_posted, checked, page
		from (
		select message_no, id, title, content,to_char(time_posted,'yyyy/mm/dd hh24:mi:ss') as time_posted, checked, ceil(rownum/5) as page
		from message where id=#{id}
		)
		where page=#{pageNo}
	</select>
	
	<select id="getTotalMessage" resultType="int">
		select count(*) from message
	</select>
	
	<select id="getMessageByNo" resultType="messageVO">
		select * from message where message_no=#{value}
	</select>
	
	<update id="updateChecked" parameterType="messageVO">
		update message set checked=#{checked} where message_no=#{message_no}
	</update>
	
	<update id="updateCheckedAll">
		update message set checked=1 where id=#{value}
	</update>
	
</mapper>